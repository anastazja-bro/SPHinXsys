<?xml version="1.0"?>

<precice-configuration>

  <solver-interface dimensions="3">

    <data:vector name="Forces"/>
    <data:vector name="DisplacementDeltas"/>

    <mesh name="FluidMesh">
      <use-data name="Forces"/>
      <use-data name="DisplacementDeltas"/>
    </mesh>

    <mesh name="StructureMesh">
      <use-data name="Forces"/>
      <use-data name="DisplacementDeltas"/>
    </mesh>

    <participant name="FluidSolver">
      <use-mesh name="FluidMesh" provide="yes"/>
      <use-mesh name="StructureMesh" from="SolidSolver"/>
      <write-data name="Forces" mesh="FluidMesh"/>
      <read-data  name="DisplacementDeltas" mesh="FluidMesh"/>
      <mapping:rbf-thin-plate-splines direction="write" from="FluidMesh" 
                                to="StructureMesh" constraint="conservative"/>
      <mapping:rbf-thin-plate-splines direction="read" from="StructureMesh" 
                                to="FluidMesh" constraint="consistent"/>
    </participant>

    <participant name="SolidSolver">
      <use-mesh name="StructureMesh" provide="yes"/>
      <write-data name="DisplacementDeltas" mesh="StructureMesh"/>
      <read-data  name="Forces" mesh="StructureMesh"/>
    </participant>

    <m2n:sockets from="FluidSolver" to="SolidSolver" exchange-directory="../"/>

    <coupling-scheme:serial-explicit>
      <participants first="FluidSolver" second="SolidSolver"/>
      <max-time value="0.05" />
      <time-window-size method="first-participant" />
      <exchange data="Forces" mesh="StructureMesh" from="FluidSolver" to="SolidSolver"/>
      <exchange data="DisplacementDeltas" mesh="StructureMesh" from="SolidSolver" to="FluidSolver"/>
    </coupling-scheme:serial-explicit>

  </solver-interface>

</precice-configuration>